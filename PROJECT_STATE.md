# 📊 PROJECT_STATE.md - 진진영어 시간표 현황

**마지막 업데이트**: 2025-10-02 04:30 (KST)

## What
- 400명 학생의 주간 시간표를 안전하게 만들고 공유·인쇄까지 지원하는 진진영어 학원 전용 웹 시스템입니다.

## Stack
- **Frontend**: React 19 (CRA), Context API, custom modals/notifications
- **Backend**: Node.js + Express 5, Nodemailer 스텁
- **Database**: SQLite (templates, schedule_entries, change_requests, users)

## Decisions
- 선생님은 직접 가입 요청 → superadmin 승인 후 로그인 (역할 기반 권한)
- 시간표 셀은 `{students, notes, color}` 구조로 저장하여 색상 강조 및 메모 표시
- 승인/거절 알림은 토스트·배지·이메일 스텁까지 동일한 API(`change_requests`)에서 처리
- 인쇄 미리보기는 학원 로고 + 일요일 강조 컬럼을 갖춘 모달로 제공

## Current Stage
- 로그인 → 수정 요청 → 승인/거절 → 알림 → 인쇄/PDF 까지 핵심 흐름이 연결된 베타 단계입니다.
- notes/색상 데이터를 기반으로 보고서와 외부 알림을 다듬으면 1차 목표를 마무리할 수 있습니다.

## Next 3 Steps
1. **PDF/프린트 레이아웃 다듬기** – 로고/메모/색상이 실제 출력물에서도 잘 보이도록 세부 스타일링 (우선순위 높음).
2. **이메일/SMS 알림 실사용 테스트** – .env SMTP 설정을 활용한 승인/거절 메일 송신 검증 및 알림 채널 확장.
3. **요청 히스토리 고급 필터** – 날짜 범위·요청자별 검색을 추가하여 관리자/선생님 모두 기록을 쉽게 추적.

## Known Issues
- CRA 기반 빌드에서 `npm audit` 경고가 남아 있음 → 추후 Vite 전환 또는 CRA 업그레이드 필요.
- SMTP 정보가 비어 있으면 이메일 알림은 콘솔 로그만 출력됨 → 운영 배포 전 반드시 SMTP 설정 확인.
- Drag & Drop 라이브러리는 아직 적용되지 않아 시간표 재배치는 클릭/입력 방식으로 진행 중.

## Resolved (금일)
- 셀 편집 UX를 모달 기반으로 개선하고 학생 색상/메모를 안전하게 저장.
- 승인/거절 결과를 토스트·배지·읽음 처리 및 이메일 스텁을 통해 즉시 전달하도록 개선.
- 인쇄 미리보기 모달을 도입해 학원 로고, 일요일 강조, 메모 표시가 포함된 출력 초안을 완성.
- 선생님 전용 요청 히스토리 패널을 추가해 본인 요청과 결과를 한눈에 확인 가능.

---

**전체 진행률**: 62% (핵심 흐름 완성, 보고/알림 고도화 단계)
